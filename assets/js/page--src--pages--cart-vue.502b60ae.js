(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9o6m":function(t,e,n){"use strict";n.r(e);n("ma9I"),n("fbCW"),n("oVuX"),n("2B1R"),n("sMBO");var r=n("a3WO");var a=n("BsWD");function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(a.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=n("VTBJ");const s={_origin:"https://api.emailjs.com"},c=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class u{constructor(t){this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"}}const m=(t,e,n={})=>new Promise((r,a)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:t})=>{const e=new u(t);200===e.status||"OK"===e.text?r(e):a(e)}),o.addEventListener("error",({target:t})=>{a(new u(t))}),o.open("POST",s._origin+t,!0),Object.keys(n).forEach(t=>{o.setRequestHeader(t,n[t])}),o.send(e)});var l=(t,e,n,r)=>{const a=r||s._userID;c(a,t,e);const o={lib_version:"3.11.0",user_id:a,service_id:t,template_id:e,template_params:n};return m("/api/v1.0/email/send",JSON.stringify(o),{"Content-type":"application/json"})},d=n("L2JU"),h={computed:Object(i.a)({},Object(d.b)("cart",{total:"total"}))},f=n("KHd+"),p=Object(f.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"curr-price price-val",staticStyle:{"font-size":"1.6rem"}},[this._v("\n  "+this._s(this._f("money")(this.total))+"\n")])}),[],!1,null,"c067f3d8",null).exports,b=n("a+hW"),v={value:"",text:"Chọn xã hoặc phường"},_={value:"",text:"Chọn quận hoặc huyện",xa_phuong:[v]},y={components:{CartTotal:p},metaInfo:{title:"Thanh Toán"},data:function(){return{form:{phone:"",email:"",name:"",address:"",city:"",ward:"",district:"",note:""},submitting:!1}},computed:Object(i.a)(Object(i.a)({},Object(d.b)("cart",{getProducts:"getProducts"})),{},{countProducts:function(){return this.getProducts.length},cities:function(){var t=this.$page.hanhchinhs.edges.map((function(t){return{value:t.node.name_with_type,text:t.node.name_with_type,quan_huyen:t.node.quan_huyen}}));return[{value:"",text:"Chọn tỉnh hoặc thành phố",quan_huyen:[_]}].concat(o(t))},districts:function(){var t=this,e=this.wards.find((function(e){return e.value===t.form.ward}));return e?(console.log(e),[v].concat(o(e.xa_phuong.map((function(t){return{value:t.name_with_type,text:t.name_with_type}}))))):[v]},wards:function(){var t=this,e=this.cities.find((function(e){return e.value===t.form.city}));return e?[_].concat(o(e.quan_huyen.map((function(t){return{value:t.name_with_type,text:t.name_with_type,xa_phuong:t.xa_phuong}})))):[_]}}),methods:{removeFromCart:function(t){this.$store.commit("cart/remove",t)},image:function(t,e){return Object(b.a)(t,e)},submit:function(){var t=this;this.submitting=!0;var e=this.getProducts.map((function(t){return"".concat(t.name,",").concat(Object(b.b)(t.price))})).join("\n");l("service_7s3qqok","template_e0bybsd",{name:this.form.name,phone:this.form.phone,email:this.form.email,address:"".concat(this.form.address,", ").concat(this.form.district,", ").concat(this.form.ward,", ").concat(this.form.city),product_info:e,num:this.countProducts,note:this.form.note},"LIqAEhzCplX11Pv-x").then((function(){t.submitting=!1,alert("Cảm ơn quý khách đã đặt hàng thành công."),t.$store.commit("cart/removeAll"),t.$router.push("/")}),(function(){t.submitting=!1,alert("Có một vài vấn đề với hệ thống, xin quý khách hãy thử lại sau ít phút.")}))}}},g=(n("SYAA"),n("Kw5r")),w=g.default.config.optionMergeStrategies.computed,x={metadata:{pathPrefix:"/duanuong-website"}},j=function(t){var e=t.options;e.__staticData?e.__staticData.data=x:(e.__staticData=g.default.observable({data:x}),e.computed=w({$static:function(){return e.__staticData.data}},e.computed))},P=null,C=Object(f.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("div",{staticClass:"col-md-9 order-1 order-md-2"},[n("h1",[t._v("Thanh Toán")]),n("hr"),t.countProducts?t._e():n("div",[t._v("Empty Shopping Cart")]),t.countProducts?n("table",{staticClass:"cart-table"},[n("thead",[n("tr",[n("th",[t._v("Product")]),n("th",[t._v("Price")]),n("th")])]),n("tbody",t._l(t.getProducts,(function(e,r){return n("tr",[n("td",[n("g-link",{attrs:{to:e.path}},[n("g-image",{attrs:{src:t.image(t.$static.metadata.pathPrefix,e.image),width:"32",height:"32"}}),t._v("\n              "+t._s(e.name)+"\n            ")],1)],1),n("td",{staticClass:"curr-price price-val"},[t._v(t._s(t._f("money")(e.price)))]),n("td",[n("button",{on:{click:function(e){return t.removeFromCart(r)}}},[t._v("X")])])])})),0)]):t._e(),n("hr"),t.countProducts?n("div",{staticClass:"d-flex justify-content-end"},[n("span",{},[t._v("\n        Tổng Cộng:\n        "),n("CartTotal")],1)]):t._e(),t.countProducts?n("hr"):t._e(),t.countProducts?n("h4",[t._v("Đặt Hàng")]):t._e(),t.countProducts?n("b-container",{attrs:{fluid:""}},[n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"name"}},[t._v("\n            Họ và Tên\n            "),n("code",[t._v("bắt buộc")]),t._v("\n            :\n          ")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"name",type:"text",placeholder:"Nhập Họ và Tên"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"phone"}},[t._v("\n            Điện Thoại\n            "),n("code",[t._v("bắt buộc")]),t._v("\n            :\n          ")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"phone",type:"tel",placeholder:"Nhập Số Điện Thoại"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"email"}},[t._v("Email:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Nhập Địa chỉ email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"address"}},[t._v("\n            Địa Chỉ\n            "),n("code",[t._v("bắt buộc")]),t._v("\n            :\n          ")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"address",type:"text",placeholder:"Nhập Số Nhà và Tên Đường"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"city"}},[t._v("Thành Phố:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-select",{attrs:{id:"city",options:t.cities},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"ward"}},[t._v("Quận:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-select",{attrs:{id:"ward",options:t.wards},model:{value:t.form.ward,callback:function(e){t.$set(t.form,"ward",e)},expression:"form.ward"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"district"}},[t._v("Phường:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-select",{attrs:{id:"district",options:t.districts},model:{value:t.form.district,callback:function(e){t.$set(t.form,"district",e)},expression:"form.district"}})],1)],1),n("b-row",{},[n("b-col",{attrs:{sm:"3"}}),n("b-col",{attrs:{sm:"9"}},[n("b-button",{attrs:{variant:"danger",disabled:t.submitting},on:{click:t.submit}},[t._v("\n            Đặt Hàng\n          ")])],1)],1)],1):t._e()],1)])}),[],!1,null,"0d9d473b",null);"function"==typeof j&&j(C),"function"==typeof P&&P(C);e.default=C.exports},DQxc:function(t,e,n){},SYAA:function(t,e,n){"use strict";n("DQxc")},fbCW:function(t,e,n){"use strict";var r=n("I+eb"),a=n("tycR").find,o=n("RNIs"),i=n("rkAj"),s=!0,c=i("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")}}]);